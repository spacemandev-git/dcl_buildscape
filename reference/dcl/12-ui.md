# 2D UI (ReactEcs)

## Overview

Decentraland SDK7 uses a React-like JSX syntax for 2D screen-space UI. UI code must be in `.tsx` files.

## Setup

Create a `ui.tsx` file in your `src/` folder:

```typescript
// src/ui.tsx
import { ReactEcsRenderer, UiEntity } from '@dcl/sdk/react-ecs'
import { Color4 } from '@dcl/sdk/math'

export function setupUI() {
  ReactEcsRenderer.setUiRenderer(MainUI)
}

function MainUI() {
  return (
    <UiEntity
      uiTransform={{
        width: 200,
        height: 100,
        margin: { top: '20px', left: '20px' }
      }}
      uiBackground={{ color: Color4.fromHexString('#333333') }}
    />
  )
}
```

```typescript
// src/index.ts
import { setupUI } from './ui'

export function main() {
  setupUI()
  // ... rest of scene
}
```

## UiEntity Properties

### uiTransform (Positioning & Size)

```typescript
uiTransform={{
  // Size
  width: 200,           // Pixels
  width: '50%',         // Percentage of parent
  height: 100,
  minWidth: 50,
  maxWidth: 400,
  minHeight: 30,
  maxHeight: 200,

  // Position
  position: { top: 10, left: 10 },
  positionType: 'absolute',  // 'absolute' or 'relative'

  // Margins (outside element)
  margin: { top: 10, right: 10, bottom: 10, left: 10 },
  margin: 10,  // All sides

  // Padding (inside element)
  padding: { top: 5, right: 5, bottom: 5, left: 5 },
  padding: 5,

  // Flexbox
  flexDirection: 'row',      // 'row', 'column', 'row-reverse', 'column-reverse'
  justifyContent: 'center',  // 'flex-start', 'flex-end', 'center', 'space-between', 'space-around'
  alignItems: 'center',      // 'flex-start', 'flex-end', 'center', 'stretch'
  alignSelf: 'auto',
  flexWrap: 'wrap',
  flexGrow: 1,
  flexShrink: 0,
  flexBasis: 'auto',

  // Display
  display: 'flex',  // 'flex' or 'none'
}}
```

### uiBackground

```typescript
uiBackground={{
  // Solid color
  color: Color4.fromHexString('#FF0000'),
  color: Color4.create(1, 0, 0, 0.5),  // With alpha

  // Image
  texture: { src: 'assets/ui/background.png' },
  textureMode: 'stretch',  // 'stretch', 'nine-slices', 'center'

  // Nine-slice (for scalable UI)
  textureSlices: {
    top: 10,
    right: 10,
    bottom: 10,
    left: 10
  }
}}
```

### uiText (Labels)

```typescript
import { Label } from '@dcl/sdk/react-ecs'

<Label
  value="Hello World"
  fontSize={18}
  color={Color4.White()}
  textAlign="middle-center"
  font="sans-serif"
/>
```

Text alignment options:
- `top-left`, `top-center`, `top-right`
- `middle-left`, `middle-center`, `middle-right`
- `bottom-left`, `bottom-center`, `bottom-right`

## Buttons & Interactions

```typescript
import { Button } from '@dcl/sdk/react-ecs'

function MyUI() {
  return (
    <Button
      value="Click Me"
      variant="primary"
      fontSize={16}
      uiTransform={{ width: 120, height: 40 }}
      onMouseDown={() => {
        console.log('Button clicked!')
      }}
    />
  )
}
```

Button variants: `'primary'`, `'secondary'`

## Input Fields

```typescript
import { Input } from '@dcl/sdk/react-ecs'

let inputValue = ''

function MyUI() {
  return (
    <Input
      placeholder="Enter text..."
      fontSize={14}
      uiTransform={{ width: 200, height: 36 }}
      onChange={(value) => {
        inputValue = value
      }}
      onSubmit={(value) => {
        console.log('Submitted:', value)
      }}
    />
  )
}
```

## Dropdown

```typescript
import { Dropdown } from '@dcl/sdk/react-ecs'

const options = ['Option 1', 'Option 2', 'Option 3']

function MyUI() {
  return (
    <Dropdown
      options={options}
      selectedIndex={0}
      fontSize={14}
      uiTransform={{ width: 150, height: 36 }}
      onChange={(index) => {
        console.log('Selected:', options[index])
      }}
    />
  )
}
```

## Dynamic UI with State

```typescript
import { ReactEcsRenderer, UiEntity, Label, Button } from '@dcl/sdk/react-ecs'
import { Color4 } from '@dcl/sdk/math'

let score = 0
let isVisible = true

function GameUI() {
  if (!isVisible) return null

  return (
    <UiEntity
      uiTransform={{
        width: 200,
        height: 100,
        positionType: 'absolute',
        position: { top: '10px', right: '10px' }
      }}
      uiBackground={{ color: Color4.fromHexString('#000000AA') }}
    >
      <Label
        value={`Score: ${score}`}
        fontSize={24}
        color={Color4.White()}
      />
      <Button
        value="Add Point"
        fontSize={14}
        uiTransform={{ width: 100, height: 30, margin: { top: 10 } }}
        onMouseDown={() => {
          score += 1
        }}
      />
    </UiEntity>
  )
}

// Toggle visibility
export function toggleUI() {
  isVisible = !isVisible
}

// Modify score from game logic
export function addScore(points: number) {
  score += points
}
```

## Multiple UI Modules

Combine multiple UI sections:

```typescript
ReactEcsRenderer.setUiRenderer(() => [
  <ScoreUI key="score" />,
  <InventoryUI key="inventory" />,
  <MinimapUI key="minimap" />
])
```

## Responsive Text

Scale font based on screen size:

```typescript
import { scaleFontSize } from '@dcl/sdk/react-ecs'

<Label
  value="Responsive Text"
  fontSize={scaleFontSize(24, 'height', 0.5)}
/>
```

## Borders

```typescript
uiBackground={{
  color: Color4.White()
}}
// Note: Border properties may require additional styling
```

## UI Layering

UI elements render in order - later elements appear on top.

```typescript
function LayeredUI() {
  return (
    <UiEntity uiTransform={{ width: '100%', height: '100%' }}>
      {/* Background layer */}
      <UiEntity uiTransform={{ position: { top: 0, left: 0 } }}>
        {/* ... */}
      </UiEntity>

      {/* Foreground layer (renders on top) */}
      <UiEntity uiTransform={{ position: { top: 0, left: 0 } }}>
        {/* ... */}
      </UiEntity>
    </UiEntity>
  )
}
```

## Best Practices

1. **One setUiRenderer call**: Only call `ReactEcsRenderer.setUiRenderer()` once
2. **Use .tsx extension**: Required for JSX syntax
3. **Organize UI code**: Keep UI in separate files
4. **Minimize updates**: Avoid unnecessary re-renders
5. **Consider screen size**: Use percentages and responsive scaling
6. **Layer wisely**: Put interactive elements on top
